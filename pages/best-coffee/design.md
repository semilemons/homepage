# 4:6メソッド コーヒー抽出ガイドアプリ 設計書

## 1. アプリケーション概要
このアプリケーションは、TETSU KASUYAによって開発された4:6メソッドに基づくコーヒー抽出をガイドするものです。ユーザーが簡単に高品質なコーヒーを淹れられるよう、ステップバイステップでの指示を提供します。

## 2. 主要機能

### 2.1 初期設定
- コーヒー粉の量入力（デフォルトは20g）
- 水量の自動計算（コーヒー粉の15倍）
- 味わいバリエーションの選択
- 濃さバリエーションの選択
- スケールの初期値設定

### 2.2 抽出ガイド
- 5段階の抽出ステップを提供
- 各ステップでの注ぐべき水量を表示
- 現在の総水量と目標水量を表示
- タイマー機能（オプション）

### 2.3 カスタマイズ機能
- 味わいバリエーション：ベーシック、より甘く、より明るく
- 濃さバリエーション：薄く、普通、濃く

## 3. データモデル

### 3.1 ユーザー入力
```typescript
interface UserInput {
  coffeeAmount: number;
  tasteVariant: 'basic' | 'sweet' | 'bright';
  strengthVariant: 'light' | 'normal' | 'strong';
  initialScale: number;
}
```

### 3.2 抽出設定
```typescript
interface BrewingSettings {
  waterAmount: number;
  pourAmounts: number[];
  totalSteps: number;
}
```

### 3.3 味わいバリエーション
```typescript
interface TasteVariant {
  name: string;
  firstPour: number;
  secondPour: number;
  description: string;
}
```

### 3.4 濃さバリエーション
```typescript
interface StrengthVariant {
  name: string;
  pourSteps: number[];
  description: string;
}
```

## 4. コンポーネント構造

### 4.1 CoffeeBrewingGuide（メインコンポーネント）
- 状態管理
- ユーザー入力の処理
- 抽出ステップの制御

### 4.2 InitialSetupForm
- コーヒー粉量入力
- バリエーション選択
- スケール初期値設定

### 4.3 BrewingStepGuide
- 現在のステップ表示
- 水量指示
- 次のステップへの遷移制御

### 4.4 TimerComponent（オプション）
- 各ステップのタイミング管理

## 5. 状態管理
React の useState と useEffect フックを使用して、アプリケーションの状態を管理します。

主要な状態:
- currentStep: number
- brewingSettings: BrewingSettings
- userInput: UserInput

## 6. ユーザーインターフェース

### 6.1 初期設定画面
- コーヒー粉量入力フィールド
- 味わいバリエーション選択ドロップダウン
- 濃さバリエーション選択ドロップダウン
- スケール初期値入力フィールド
- 「抽出開始」ボタン

### 6.2 抽出ガイド画面
- 現在のステップ番号と説明
- 注ぐべき水量
- 現在の総水量と目標水量
- タイマー表示（オプション）
- 「次へ」ボタン
- 「前へ」ボタン（最初のステップ以外）
- 「最初からやり直す」ボタン（最後のステップ）

## 7. 改善点

1. 正確な水量計算: 40%と60%の分割を厳密に行う
2. 5段階の抽出ステップ: 準備、1回目（40%の前半）、2回目（40%の後半）、3-5回目（60%を3回に分割）
3. バリエーションに応じた水量調整: 選択された味わいと濃さに基づいて各ステップの水量を計算
4. タイマー機能の追加: 各ステップの適切な時間を管理（オプション）
5. より詳細な説明: 各ステップでのポイントや注意事項を表示

## 8. 実装上の注意点

- TypeScriptを使用して型安全性を確保する
- コンポーネントの責務を明確に分離し、再利用性を高める
- ユーザー体験を向上させるためのUI/UXデザインに注力する
- エラーハンドリングとバリデーションを適切に実装する
- レスポンシブデザインを採用し、様々なデバイスでの使用を想定する

この設計書に基づいてアプリケーションを実装することで、4:6メソッドの正確な仕様に準拠し、ユーザーフレンドリーなコーヒー抽出ガイドアプリを作成することができます。